{# El div principal ahora es un contenedor y tiene los estilos y clases de alineaci√≥n #}
<div class="custom-company-header container d-flex justify-content-between align-items-center">

    {% if company_short_name and branding %}
    <a href="{{ url_for('home', company_short_name=company_short_name) }}"
       class="brand-name"
       style="{{ branding.primary_text_style }}">
        {{ branding.name }} IA
    </a>
    {% else %}
        <span class="brand-name">
             IAToolkit
        </span>
    {% endif %}

        {# Contenedor derecho: powered-by a la izquierda y selector de idioma a la derecha #}
    <div class="d-flex align-items-center ms-auto">
        <div class="me-3 d-flex align-items-center">
            <span class="powered-by">
                Powered by <a href="{{ url_for('index', lang=request.args.get('lang', 'en')) }}" rel="noopener noreferrer" class="iatoolkit-link">IAToolkit</a>
            </span>
        </div>

        {% set current_lang = request.args.get('lang', 'en') %}
        {% set has_endpoint = request.endpoint is not none %}

        {% if has_endpoint %}
          {% if request.view_args %}
            {% set href_en = url_for(request.endpoint, lang='en', **request.view_args) %}
            {% set href_es = url_for(request.endpoint, lang='es', **request.view_args) %}
          {% else %}
            {% set href_en = url_for(request.endpoint, lang='en') %}
            {% set href_es = url_for(request.endpoint, lang='es') %}
          {% endif %}
        {% else %}
          {% set href_en = url_for('index', lang='en') %}
          {% set href_es = url_for('index', lang='es') %}
        {% endif %}

        <div class="language-switcher d-flex align-items-center">
            <a href="{{ href_en }}" class="language-link {{ 'active' if current_lang == 'en' else '' }}">EN</a>
            <span class="mx-1">|</span>
            <a href="{{ href_es }}" class="language-link {{ 'active' if current_lang == 'es' else '' }}">ES</a>
        </div>
    </div>


</div>